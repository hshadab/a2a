# =============================================================================
# ThreatProof - Threat Intelligence Network Configuration
# =============================================================================
#
# Copy this file to .env and fill in your values:
#   cp .env.example .env
#
# For production deployment, set PRODUCTION_MODE=true and ensure all
# required production variables are configured.
#
# =============================================================================

# =============================================================================
# PRODUCTION MODE
# =============================================================================
# Set to "true" to enable production mode with strict validation.
# In production mode:
# - Simulated zkML proofs are rejected (real proofs required)
# - Simulated payments are rejected (real wallet required)
# - In-memory database fallback is disabled (PostgreSQL required)
#
# Default: false (demo mode with graceful fallbacks)
PRODUCTION_MODE=false

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# PostgreSQL connection string
# Format: postgresql://user:password@host:port/database
#
# For local development:
DATABASE_URL=postgresql://threat_intel:threat_intel_pass@localhost:5432/threat_intel

# For production (Render, Railway, etc.), use your database URL:
# DATABASE_URL=postgresql://user:password@db-host.example.com:5432/threat_intel

# SSL mode for database connections:
# - require: SSL with full certificate verification (recommended for production)
# - prefer: SSL without strict verification (for self-signed certs)
# - disable: No SSL (local development only)
DATABASE_SSL_MODE=prefer

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
# Redis is used for event coordination between agents
REDIS_URL=redis://localhost:6379

# =============================================================================
# AGENT URLS
# =============================================================================
# URLs for inter-agent communication
# In production, these should point to your deployed agent URLs
SCOUT_URL=http://localhost:8000
POLICY_URL=http://localhost:8001
ANALYST_URL=http://localhost:8002

# =============================================================================
# x402 PAYMENT CONFIGURATION (Base Mainnet)
# =============================================================================
# Base RPC endpoint (mainnet by default)
BASE_RPC_URL=https://mainnet.base.org

# -----------------------------------------------------------------------------
# WALLET CONFIGURATION (REQUIRED FOR PRODUCTION)
# -----------------------------------------------------------------------------
# Private key of the wallet that will make USDC payments
# SECURITY: Keep this secret! Use environment variables or a secrets manager.
# Format: 0x followed by 64 hex characters (or without 0x prefix)
#
# To create a new wallet:
# 1. Use a wallet like MetaMask or Coinbase Wallet
# 2. Export the private key
# 3. Fund it with ETH (for gas) and USDC on Base mainnet
#
# Example (DO NOT use this - generate your own):
# PRIVATE_KEY=0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef
PRIVATE_KEY=

# Treasury address - where agents receive payments
# This should be the public address corresponding to your private key
# You can find this in your wallet (e.g., MetaMask shows it at the top)
#
# Example (DO NOT use this - use your own):
# TREASURY_ADDRESS=0x1234567890123456789012345678901234567890
TREASURY_ADDRESS=

# Gas limit for ERC20 transfers (default: 100000)
# Automatic estimation is used when possible
X402_GAS_LIMIT=100000

# Payment verification tolerance (default: 0.001 = 0.1%)
# Allows for small rounding differences in payment amounts
PAYMENT_TOLERANCE=0.001

# =============================================================================
# zkML / JOLT ATLAS CONFIGURATION (REQUIRED FOR PRODUCTION)
# =============================================================================
# Path to the zkml-cli binary (proof_json_output)
#
# To install:
#   ./scripts/setup_zkml.sh
#
# Or download manually from:
#   https://github.com/hshadab/zkx402/releases/download/jolt-binary-v1/proof_json_output
#
# Default location after running setup script:
ZKML_CLI_PATH=/usr/local/bin/proof_json_output

# Jolt Atlas installation path (for development)
JOLT_ATLAS_PATH=./jolt-atlas

# Model directory paths (relative to PYTHONPATH)
JOLT_MODEL_DIR=./agents/policy/models/jolt

# =============================================================================
# URL SOURCE CONFIGURATION
# =============================================================================
# PhishTank API key (optional)
# - Not required for basic operation (uses public data dump)
# - Enables individual URL lookup via API
# - Get a key at: https://phishtank.org/api_register.php
PHISHTANK_API_KEY=

# Enable/disable PhishTank source (default: true)
ENABLE_PHISHTANK_SOURCE=true

# Twitter/X API Bearer Token (optional)
# Required only if you want to enable the Twitter threat source
# Get a token at: https://developer.twitter.com/
TWITTER_BEARER_TOKEN=

# Enable/disable Twitter source (default: false)
ENABLE_TWITTER_SOURCE=false

# Enable/disable paste site monitoring (default: false)
ENABLE_PASTE_SOURCE=false

# Enable/disable Certificate Transparency monitoring (default: true)
ENABLE_CT_SOURCE=true

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# API key for the /trigger endpoint (optional)
# If set, requests to /trigger must include X-API-Key header
# Generate a random key: openssl rand -hex 32
SCOUT_API_KEY=

# =============================================================================
# SCOUT SETTINGS
# =============================================================================
# Interval between batch processing (in seconds)
# Default: 300 (5 minutes)
SCOUT_INTERVAL_SECONDS=300

# Maximum URLs per batch
# Default: 50
SCOUT_BATCH_SIZE=50

# =============================================================================
# UI CONFIGURATION
# =============================================================================
# These are used by the Next.js dashboard
NEXT_PUBLIC_SCOUT_URL=http://localhost:8000
NEXT_PUBLIC_WS_URL=ws://localhost:8000/ws

# =============================================================================
# ADVANCED SETTINGS
# =============================================================================
# Campaign clustering settings
ENABLE_CLUSTERING=true
CLUSTERING_THRESHOLD=0.6

# Dynamic reputation tracking
ENABLE_DYNAMIC_REPUTATION=true
